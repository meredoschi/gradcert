# Highest subnational division
class State < ActiveRecord::Base
  #   has_many  :municipality, :foreign_key => 'brstate_id'
  has_many  :stateregion, foreign_key: 'state_id'
  has_many  :personalinfo, foreign_key: 'state_id'
  belongs_to :country

  has_many :council
<<<<<<< HEAD
=======

  validates :name, length:  { maximum: 80 }
  validates :abbreviation,  length: { maximum: 10 }
>>>>>>> devel

  def self.default_scope
    order(name: :asc)
  end

  scope :sp, -> {
               where(abbreviation: 'SP')
             }

  scope :home, -> {
                 where(abbreviation: Settings.home_state_abbreviation)
               }

  def self.domestic
    joins(:country).merge(Country.domestic)
  end
<<<<<<< HEAD

  def self.foreign
    joins(:country).merge(Country.foreign)
  end

  # RSPEC start
  validates :name, presence: true, length:  { maximum: 80 }
  validates :abbreviation, presence: true,  length: { maximum: 10 }
  # Tested code finish
=======

  def self.foreign
    joins(:country).merge(Country.foreign)
  end

  # def self.domestic?(s)

  # 	self.domestic.exists?(s) # returns a boolean

  # 	end

  # 	def self.foreign?(s)

  # 		self.foreign.exists?(s) # returns a boolean

  # 	end
>>>>>>> devel
end
